{"ast":null,"code":"import React,{useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Form,Button,Row,Col}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import Loader from'../components/Loader';import{listProducts,deleteProduct,createProduct}from'../actions/productActions';import{PRODUCT_CREATE_RESET}from'../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProductListScreen=function ProductListScreen(_ref){var history=_ref.history,match=_ref.match;var dispatch=useDispatch();var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,errorDelete=productDelete.error,successDelete=productDelete.success;var productCreate=useSelector(function(state){return state.productCreate;});var loadingCreate=productCreate.loading,errorCreate=productCreate.error,successCreate=productCreate.success,createdProduct=productCreate.product;useEffect(function(){dispatch({type:PRODUCT_CREATE_RESET});if(!userInfo.isAdmin){history.push('/login');}if(successCreate){history.push(\"/admin/product/\".concat(createdProduct._id,\"/edit\"));}else{dispatch(listProducts());}},[dispatch,history,userInfo,successCreate,successDelete,createdProduct]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure')){//Delete products\ndispatch(deleteProduct(id));}};var createProductHandler=function createProductHandler(){dispatch(createProduct());};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Products\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsxs(Button,{className:\"my-3\",onClick:createProductHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),\"Create Product\"]})})]}),loadingCreate&&/*#__PURE__*/_jsx(Loader,{}),errorCreate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorCreate}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{striped:true,borded:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CATEGEORY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"BRANDS\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",product.price]}),/*#__PURE__*/_jsx(\"td\",{children:product.category}),/*#__PURE__*/_jsx(\"td\",{children:product.brand}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/product/\".concat(product._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(product._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},product._id);})})]})]});};export default ProductListScreen;","map":{"version":3,"sources":["/home/ashish/Desktop/PROSHOP/frontend/src/screens/ProductListScreen.js"],"names":["React","useEffect","LinkContainer","Table","Form","Button","Row","Col","useDispatch","useSelector","Message","Loader","listProducts","deleteProduct","createProduct","PRODUCT_CREATE_RESET","ProductListScreen","history","match","dispatch","productList","state","loading","error","products","userLogin","userInfo","productDelete","loadingDelete","errorDelete","successDelete","success","productCreate","loadingCreate","errorCreate","successCreate","createdProduct","product","type","isAdmin","push","_id","deleteHandler","id","window","confirm","createProductHandler","map","name","price","category","brand"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport { LinkContainer } from 'react-router-bootstrap'\nimport { Table, Form, Button, Row, Col } from 'react-bootstrap'\n\nimport { useDispatch, useSelector } from 'react-redux'\nimport Message from '../components/Message'\nimport Loader from '../components/Loader'\nimport { listProducts,deleteProduct,createProduct } from '../actions/productActions'\n\nimport {PRODUCT_CREATE_RESET} from '../constants/productConstants'\n\nconst ProductListScreen = ({ history, match }) => {\n  const dispatch = useDispatch()\n\n  const productList = useSelector((state) => state.productList)\n  const { loading, error, products } = productList\n\n  const userLogin = useSelector((state) => state.userLogin)\n  const { userInfo } = userLogin\n\n  const productDelete = useSelector((state) => state.productDelete)\n  const { loading:loadingDelete,error:errorDelete,success:successDelete } = productDelete\n\n  const productCreate = useSelector((state) => state.productCreate)\n  const { loading:loadingCreate,error:errorCreate,success:successCreate,product:createdProduct } = productCreate\n\n\n  useEffect(() => {\n    dispatch({type:PRODUCT_CREATE_RESET})\n    if (!userInfo.isAdmin) {\n      history.push('/login')\n    } \n    if(successCreate){\n      history.push(`/admin/product/${createdProduct._id}/edit`)\n    }else{\n      dispatch(listProducts())\n    }\n  }, [dispatch, history, userInfo,successCreate,successDelete,createdProduct])\n\n  const deleteHandler = (id) => {\n    if (window.confirm('Are you sure')) {\n      //Delete products\n      dispatch(deleteProduct(id))\n    }\n  }\n  const createProductHandler = () => {\n     dispatch(createProduct())\n  }\n  return (\n    <>\n      <Row className='align-items-center'>\n        <Col>\n          <h1>Products</h1>\n        </Col>\n        <Col className='text-right'>\n          <Button className='my-3' onClick={createProductHandler}>\n            <i className='fas fa-plus'></i>Create Product\n          </Button>\n        </Col>\n      </Row>\n      {loadingCreate && <Loader/>}\n     {errorCreate && <Message variant='danger'>{errorCreate}</Message>}\n\n     {loadingDelete && <Loader/>}\n     {errorDelete && <Message variant='danger'>{errorDelete}</Message>}\n\n      {loading ? (\n        <Loader />\n      ) : error ? (\n        <Message variant='danger'>{error}</Message>\n      ) : (\n        <Table striped borded hover responsive className='table-sm'>\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>NAME</th>\n              <th>PRICE</th>\n              <th>CATEGEORY</th>\n              <th>BRANDS</th>\n            </tr>\n          </thead>\n          <tbody>\n            {products.map((product) => (\n              <tr key={product._id}>\n                <td>{product._id}</td>\n                <td>{product.name}</td>\n                <td>${product.price}</td>\n                <td>{product.category}</td>\n                <td>{product.brand}</td>\n                <td>\n                  <LinkContainer to={`/admin/product/${product._id}/edit`}>\n                    <Button variant='light' className='btn-sm'>\n                      <i className='fas fa-edit'></i>\n                    </Button>\n                  </LinkContainer>\n                  <Button\n                    variant='danger'\n                    className='btn-sm'\n                    onClick={() => deleteHandler(product._id)}\n                  >\n                    <i className='fas fa-trash'></i>\n                  </Button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n      )}\n    </>\n  )\n}\n\nexport default ProductListScreen\n"]},"metadata":{},"sourceType":"module"}